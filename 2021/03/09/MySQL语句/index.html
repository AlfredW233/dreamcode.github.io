<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="DDL操作数据库1.创建​    create database 数据库名称; ​    create database if not exists 数据库名称; ​    create database 数据库名称 character set 字符集名; 2.查询​    show databases; ​    show create database 数据库名称;    查询某个数据库的创建">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2021/03/09/MySQL%E8%AF%AD%E5%8F%A5/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="DDL操作数据库1.创建​    create database 数据库名称; ​    create database if not exists 数据库名称; ​    create database 数据库名称 character set 字符集名; 2.查询​    show databases; ​    show create database 数据库名称;    查询某个数据库的创建">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-03-09T11:33:10.639Z">
<meta property="article:modified_time" content="2020-03-25T13:52:59.220Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-MySQL语句" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/09/MySQL%E8%AF%AD%E5%8F%A5/" class="article-date">
  <time class="dt-published" datetime="2021-03-09T11:33:10.639Z" itemprop="datePublished">2021-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h1><h2 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h2><h4 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h4><p>​    create database 数据库名称;</p>
<p>​    create database if not exists 数据库名称;</p>
<p>​    create database 数据库名称 character set 字符集名;</p>
<h4 id="2-查询"><a href="#2-查询" class="headerlink" title="2.查询"></a>2.查询</h4><p>​    show databases;</p>
<p>​    show create database 数据库名称;    <strong>查询某个数据库的创建语句</strong></p>
<h4 id="3-修改"><a href="#3-修改" class="headerlink" title="3.修改"></a>3.修改</h4><p>​    alter database 数据库名称 character set 字符集名称;</p>
<h4 id="4-删除"><a href="#4-删除" class="headerlink" title="4.删除"></a>4.删除</h4><p>​    drop database 数据库名称;</p>
<p>​    drop database if exists  数据库名称;</p>
<h4 id="5-使用数据库"><a href="#5-使用数据库" class="headerlink" title="5.使用数据库"></a>5.使用数据库</h4><p>​    select database();    <strong>查询正在使用的数据库</strong></p>
<p>​    use 数据库名称;    <strong>使用数据库</strong></p>
<h2 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h2><h4 id="1-创建-1"><a href="#1-创建-1" class="headerlink" title="1.创建"></a>1.创建</h4><p>create table 表名(列名1 数据类型1,列名2 数据类型2, …. ,列名n 数据类型n);</p>
<p>create table 表名 like 被复制的表名;    <strong>表的复制</strong></p>
<h4 id="2-查询-1"><a href="#2-查询-1" class="headerlink" title="2.查询"></a>2.查询</h4><p>show tables;    <strong>查询某个数据库里表的名称</strong></p>
<p>desc 表名;    <strong>查询表的结构</strong></p>
<h4 id="3-修改-1"><a href="#3-修改-1" class="headerlink" title="3.修改"></a>3.修改</h4><p>alter table 表名 rename to 新的表名;    <strong>修改表名</strong></p>
<p>alter table 表名 character set 字符集名称;    <strong>修改字符集</strong></p>
<p>alter table 表名 add 列名 数据类型;    <strong>添加一列</strong></p>
<p>alter table 表名 change 列名 新的列名 新数据类型;    <strong>修改列名称</strong> <strong>类型</strong></p>
<p>alter table 表名 modify sex 新数据类型;    <strong>修改列类型</strong></p>
<p>alter table 表名 drop 列名;    <strong>删除列</strong></p>
<h4 id="4-删除-1"><a href="#4-删除-1" class="headerlink" title="4.删除"></a>4.删除</h4><p>drop table 表名;</p>
<p>drop table if exists 表名;</p>
<h1 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h1><h4 id="1-添加数据"><a href="#1-添加数据" class="headerlink" title="1.添加数据"></a>1.添加数据</h4><p>insert into 表名(列名1,列名2,….列名n) values(值1,值2,….值n);</p>
<p>insert into 表名 values(值1,值2,….值n);</p>
<h4 id="2-删除数据"><a href="#2-删除数据" class="headerlink" title="2.删除数据"></a>2.删除数据</h4><p>delete from 表名 [where 条件];    <!--如果没有条件删除所有的数据--></p>
<p>​        删除全部记录：delete from 表名;    <strong>不推荐</strong></p>
<p>​                                truncate table 表名;    <strong>推荐</strong></p>
<h4 id="3-修改数据"><a href="#3-修改数据" class="headerlink" title="3.修改数据"></a>3.修改数据</h4><p>update 表名 set 列名1 = 值1, 列名2 = 值2,….[where 条件];    <!--如果没有条件改变所有的值--></p>
<h1 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h1><p>select [distinct] [字段] [别名] , [分组字段] , [聚合函数] …from 表名 [where 条件] [分组查询] [having 条件] [排序查询] [分页查询]</p>
<p>distinct 去重复</p>
<p>ifnull(表达式1,表达式2)</p>
<h4 id="1-条件查询"><a href="#1-条件查询" class="headerlink" title="1.条件查询"></a>1.条件查询</h4><p>&lt;,&gt;,=,&lt;=,&gt;=,!=,&lt;&gt;</p>
<p>between …and…</p>
<p>in(A,B,C…)</p>
<p>is null    is not null</p>
<p>not and or     ! &amp;&amp; ||</p>
<p>模糊查询：like      _:单个字符 %:多个任意字符</p>
<h4 id="2-排序查询"><a href="#2-排序查询" class="headerlink" title="2.排序查询"></a>2.排序查询</h4><p>order by 排序字段1 排序方式1, 排序字段2 排序方式2…;</p>
<p>​                    排序方式：ASC 升序，默认    DESC 降序</p>
<h4 id="3-聚合函数"><a href="#3-聚合函数" class="headerlink" title="3.聚合函数"></a>3.聚合函数</h4><p>聚合函数排除了null的值，解决方法 1选择非空 2ifnull函数</p>
<h6 id="1-count"><a href="#1-count" class="headerlink" title="1.count()"></a>1.count()</h6><p>1.一般选择非空的列：主键</p>
<p>2.count(*)</p>
<h6 id="2-max"><a href="#2-max" class="headerlink" title="2.max()"></a>2.max()</h6><h6 id="3-min"><a href="#3-min" class="headerlink" title="3.min()"></a>3.min()</h6><h6 id="4-sum"><a href="#4-sum" class="headerlink" title="4.sum()"></a>4.sum()</h6><h6 id="5-avg"><a href="#5-avg" class="headerlink" title="5.avg()"></a>5.avg()</h6><h4 id="4-分组查询"><a href="#4-分组查询" class="headerlink" title="4.分组查询"></a>4.分组查询</h4><p>group by 分组字段;</p>
<h4 id="5-分页查询"><a href="#5-分页查询" class="headerlink" title="5.分页查询"></a>5.分页查询</h4><p>limit 开始的索引,每页查询的条数;</p>
<p>​        开始的索引 = （当前的页码 - 1）* 每页显示的条数</p>
<p>​    limit 分页操作是一个”方言’’</p>
<h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><p>对表中数据进行限定，保证数据的正确性、有效性和完整性</p>
<h4 id="主键约束：primary-key"><a href="#主键约束：primary-key" class="headerlink" title="主键约束：primary key"></a>主键约束：primary key</h4><p>1.非空且唯一    2.一张表只能有一个字段作为主键    3.主键就是表中唯一标识</p>
<p>create table 表名(列表名称 数据类型 primary key…);    <strong>创建时添加约束</strong></p>
<p>alter table 表名 modify 列表名称 数据类型 primary key;    <strong>创建完后添加</strong></p>
<p>alter table 表名 drop primary key;    <strong>删除约束</strong></p>
<h5 id="自动增长：auto-increment"><a href="#自动增长：auto-increment" class="headerlink" title="自动增长：auto_increment"></a>自动增长：auto_increment</h5><p>​    create table 表名(列表名称 数据类型 primary key auto_increment…);    <strong>创建时添加自动增长</strong></p>
<p>​    alter table 表名 modify 列表名称 数据类型 [primary key] auto_increment;    <strong>添加自动增长</strong></p>
<p>​    alter table 表名 modify 列表名称 数据类型;    <strong>删除自动增长</strong></p>
<h4 id="非空约束：not-null"><a href="#非空约束：not-null" class="headerlink" title="非空约束：not null"></a>非空约束：not null</h4><p>create table 表名( 列表名称 数据类型 not null…);    <strong>创建时添加约束</strong></p>
<p>alter table 表名 modify 列表名称 数据类型 not null;    <strong>创建完后添加</strong></p>
<p>alter table 表名 modify 列表名称 数据类型;    <strong>删除约束</strong></p>
<h4 id="唯一约束：unique"><a href="#唯一约束：unique" class="headerlink" title="唯一约束：unique"></a>唯一约束：unique</h4><p>create table 表名(列表名称 数据类型 unique…);    <strong>创建时添加约束</strong></p>
<p>alter table 表名 modify 列表名称 数据类型 unique;    <strong>创建完后添加</strong></p>
<p>alter table 表名 drop index 列表名称;    <strong>删除约束</strong></p>
<!--唯一约束可以有多个null值-->

<h4 id="外键约束：foreign-key"><a href="#外键约束：foreign-key" class="headerlink" title="外键约束：foreign key"></a>外键约束：foreign key</h4><p>create table 表名(…, constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称));    <strong>创建时添加外键约束</strong></p>
<p>alter table 表名 add constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称);    <strong>创建完后添加</strong></p>
<p>alter table 表名 drop foreign key 外键名称;    <strong>删除外键</strong></p>
<p>on update cascade    <strong>级联更新</strong></p>
<p>on delete cascade    <strong>级联删除</strong></p>
<h1 id="数据库的备份与还原"><a href="#数据库的备份与还原" class="headerlink" title="数据库的备份与还原"></a>数据库的备份与还原</h1><h4 id="1-命令行："><a href="#1-命令行：" class="headerlink" title="1.命令行："></a>1.命令行：</h4><h5 id="备份：mysqldump-u用户名-p密码-数据库名称-gt-保存的路径"><a href="#备份：mysqldump-u用户名-p密码-数据库名称-gt-保存的路径" class="headerlink" title="备份：mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径"></a>备份：mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</h5><h5 id="还原："><a href="#还原：" class="headerlink" title="还原："></a>还原：</h5><p>1.登陆数据库</p>
<p>2.创建数据库</p>
<p>3.使用数据库</p>
<p>4.执行文件。source 文件路径</p>
<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><h4 id="1-内连接查询"><a href="#1-内连接查询" class="headerlink" title="1.内连接查询"></a>1.内连接查询</h4><p>1.隐式内连接：用where消除无用的数据</p>
<p>2.显式内连接：    select 字段列表 from 表名 [inner] join 表名2 on 条件</p>
<p>从哪些表查以及合理的条件和查询的字段</p>
<h4 id="2-外连接查询"><a href="#2-外连接查询" class="headerlink" title="2.外连接查询"></a>2.外连接查询</h4><p>1.左外链接</p>
<p>​    select 字段表 from 表1 left [outer] join 表2 on 条件</p>
<p>​    查询左表所有数据以及其交集部分</p>
<p>2.右外连接</p>
<p>​    select 字段表 from 表1 right [outer] join 表2 on 条件</p>
<p>​    查询右表所有数据以及其交集部分</p>
<h4 id="3-子查询"><a href="#3-子查询" class="headerlink" title="3.子查询"></a>3.子查询</h4><p>查询中嵌套查询，称嵌套查询为子查询。</p>
<h5 id="1-子查询的结果是单行单列的："><a href="#1-子查询的结果是单行单列的：" class="headerlink" title="1.子查询的结果是单行单列的："></a>1.子查询的结果是单行单列的：</h5><p>可以作为条件，使用运算符去判断。</p>
<h5 id="2-子查询的结果是多行单列的："><a href="#2-子查询的结果是多行单列的：" class="headerlink" title="2.子查询的结果是多行单列的："></a>2.子查询的结果是多行单列的：</h5><p>子查询可以作为条件，使用运算符in来判断</p>
<h5 id="3-子查询的结果是多行多列的："><a href="#3-子查询的结果是多行多列的：" class="headerlink" title="3.子查询的结果是多行多列的："></a>3.子查询的结果是多行多列的：</h5><p>子查询可以作为一张虚拟表</p>
<h1 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h1><h4 id="1-管理用户"><a href="#1-管理用户" class="headerlink" title="1. 管理用户"></a>1. 管理用户</h4><p>​    %：所有的主机  localhost：本地主机</p>
<ol>
<li><p>添加用户：</p>
<p>create user ‘用户名’ @ ‘主机名’ identified by ‘密码’;</p>
</li>
<li><p>删除用户：</p>
<p>drop user ‘用户名’ @ ‘主机名’;</p>
</li>
<li><p>修改用户密码：</p>
<p>update user set password = password(‘新密码’) where user = ‘用户名’;</p>
<p>set password for  ‘用户名’ @ ‘主机名’ = password(‘新密码’);</p>
</li>
<li><p>查询用户：</p>
<p>use mysql;</p>
<p>select * from user;</p>
</li>
</ol>
<h4 id="2-授权"><a href="#2-授权" class="headerlink" title="2.授权"></a>2.授权</h4><ol>
<li><p>查询权限：</p>
<p>show grants for ‘用户名’ @ ‘主机名’;</p>
</li>
<li><p>授予权限：</p>
<p>grant 权限列表 on 数据库名.表名 to ‘用户名’ @ ‘主机名’;</p>
<p>grant all on * . * to  ‘用户名’ @ ‘主机名’;</p>
</li>
<li><p>撤销权限：</p>
<p>revoke 权限列表 on 数据库名.表名 from ‘用户名’ @ ‘主机名’;</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/09/MySQL%E8%AF%AD%E5%8F%A5/" data-id="ckm21kx9z0001x8wu1hqx2hqr" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/03/09/Spring%20boot%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2021/03/09/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/09/zhihuijun/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/09/spring%20boot%E6%B3%A8%E8%A7%A3%E5%A4%A7%E5%85%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/09/Spring%20boot%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/09/MySQL%E8%AF%AD%E5%8F%A5/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/09/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>